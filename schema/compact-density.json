{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/guardian/recipes-backend/refs/heads/main/schema/compact-density.json",
  "title": "DensityJson",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "prepared_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 timestamp indicating when the result was prepared"
    },
    "key": {
      "type": "array",
      "description": "Column names corresponding to each value entry",
      "items": {
        "type": "string",
        "enum": ["id", "name", "normalised_name", "density"]
      },
      "minItems": 4,
      "maxItems": 4
    },
    "values": {
      "type": "array",
      "description": "Rows of density entries matching the key ordering",
      "items": {
        "type": "array",
        "minItems": 4,
        "maxItems": 4,
        "items": [
          {
            "type": "integer",
            "description": "id"
          },
          {
            "type": "string",
            "description": "name"
          },
          {
            "type": "string",
            "description": "normalised_name"
          },
          {
            "type": "number",
            "description": "density"
          }
        ]
      }
    }
  },
  "required": ["prepared_at", "key", "values"]
}
